# SuperChat Web Client

A web-based client for SuperChat using the binschema-generated TypeScript codec.

## Features

- Real-time messaging over WebSocket
- Channel browsing and joining
- Forum and chat channel support
- Binary protocol using binschema-generated encoders/decoders

## Quick Start

1. **Build the client:**
   ```bash
   npm install
   npm run build
   ```

2. **Start the SuperChat server:**
   ```bash
   # From superchat root directory
   go run ./cmd/server
   ```

3. **Open the client:**
   - Open `index.html` in your browser, OR
   - Use a local server: `npm run serve` (serves on http://localhost:3000)

4. **Connect:**
   - Default server: `ws://localhost:8080/ws`
   - Enter a nickname and click Connect

## Development

- **Build once:** `npm run build`
- **Watch mode:** `npm run dev` (rebuilds on file changes)
- **Local server:** `npm run serve` (Python HTTP server on port 3000)

## Architecture

- **Protocol:** Uses binschema-generated TypeScript codec from `SuperChatCodec.ts`
- **Transport:** WebSocket with binary messages
- **Frame format:** 4-byte length + 1-byte version + 1-byte type + 1-byte flags + payload

## Supported Messages

- `SET_NICKNAME` (0x02): Set your nickname
- `LIST_CHANNELS` (0x04): Get channel list
- `JOIN_CHANNEL` (0x05): Join a channel
- `LIST_MESSAGES` (0x09): Get messages in a channel
- `POST_MESSAGE` (0x0A): Send a message
- `NEW_MESSAGE` (0x8D): Real-time message notification
- `PING` (0x10): Keep connection alive (automatic every 30s)

## Files

- `index.html`: Main HTML file with UI
- `src/main.ts`: Client logic and protocol handling
- `src/SuperChatCodec.ts`: Generated encoder/decoder from binschema
- `src/BitStream.ts`: Binary stream utilities (from binschema)
- `dist/main.js`: Bundled output (generated by esbuild)
