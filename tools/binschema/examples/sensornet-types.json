{
  "config": {
    "endianness": "little_endian"
  },
  "types": {
    "Packet": {
      "description": "All packets use this header format",
      "sequence": [
        { "name": "size", "type": "uint16" },
        { "name": "msg_type", "type": "uint8" },
        { "name": "device_id", "type": "uint32" },
        { "name": "sequence_num", "type": "uint16" }
      ]
    },
    "Optional<T>": {
      "description": "Optional field with presence byte",
      "sequence": [
        { "name": "present", "type": "uint8" },
        { "name": "value", "type": "T", "conditional": "present == 1" }
      ]
    },
    "SensorReading": {
      "description": "Sensor data reading",
      "sequence": [
        { "name": "sensor_type", "type": "bit", "size": 4 },
        { "name": "battery_low", "type": "bit", "size": 1 },
        { "name": "error", "type": "bit", "size": 1 },
        { "name": "reserved", "type": "bit", "size": 2 },
        { "name": "timestamp", "type": "uint32" },
        { "name": "value", "type": "float32" },
        { "name": "location", "type": "Optional<uint32>" }
      ]
    },
    "ConfigUpdate": {
      "description": "Configuration update command",
      "sequence": [
        { "name": "interval", "type": "uint16" },
        { "name": "threshold", "type": "float32" }
      ]
    },
    "Acknowledgment": {
      "description": "Generic acknowledgment",
      "sequence": [
        { "name": "status", "type": "uint8" }
      ]
    }
  }
}
